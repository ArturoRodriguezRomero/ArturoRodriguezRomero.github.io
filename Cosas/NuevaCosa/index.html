<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="author" content="Arturo Rodriguez Romero"/>
		<meta name="description" content="http://arturorodriguezromero.github.io/"/>
		<title>NuevaCosa</title>
		<style>
		</style>
		<script type="text/javascript">
		
		var fondoMar;
		var fondoCielo;
		var fondoIsla;
		var fondoNube;
		
		var posNube;
		var posIsla;
		
		var velIsla;
		
		var posMar;
		var direccionMar;
		
		var destino;
		var ctx;
		
		var musica;
		var olas;
		var terremoto;
		
		function inicializar(){
			destino = document.getElementById("elcanvas");
			ctx = destino.getContext("2d");
			fondoMar = new Image();
			fondoCielo = new Image();
			fondoIsla = new Image();
			fondoNube = new Image();
			
			musica = new Audio("./Recursos/Antiflux OST   Complete Soundtrack.mp3");
			olas = new Audio("./Recursos/Sea Waves-SoundBible.com-946156036.wav");
			terremoto = new Audio("./Recursos/Earthquake-SoundBible.com-768042906.wav");
			
			fondoMar.src = "./Recursos/sea.png"
			fondoCielo.src = "./Recursos/sky.png"
			fondoNube.src = "./Recursos/clouds.png"
			fondoIsla.src = "./Recursos/far-grounds.png"
			
			musica.volume = 0.5;
			olas.volume = 0.5;
			terremoto.volume = 0.8;
			
			musica.play();
			olas.addEventListener('ended', function() {
				this.currentTime = 0;
				this.play();
			}, false);
			olas.play();
			
			velIsla = 230;
			posNube = 20;
			posIsla = 400;
			posMar = 300;
			
			setInterval(function(){
				inicio();
			},15);
			
			setInterval(function(){
				posNube++;
			},100);
			
			setInterval(function(){
				/*if(posIsla>280){
					velIsla += 1000;
				}*/
				if(posIsla<320 && posIsla>240){
					terremoto.play();
				}
				if(posIsla>240){
					posIsla--;
				}
			},velIsla);
			
			setInterval(function(){
				if(posMar>=310){
					direccionMar = -1;
				} else if(posMar<=300){
					direccionMar = 1;
				}
				posMar = posMar + direccionMar;
			},200);
			
		}
		
		function inicio(){
			ctx.clearRect(0, 0, destino.width, destino.height);
			for(var i = 0; i<1000; i = i + 112){
				ctx.drawImage(fondoCielo, i, 0);
			}
			ctx.drawImage(fondoNube, posNube - 800, 150);
			ctx.drawImage(fondoNube, posNube - 600, 150);
			ctx.drawImage(fondoNube, posNube - 400, 150);
			ctx.drawImage(fondoNube, posNube - 200, 150);
			ctx.drawImage(fondoNube, posNube + 200, 150);
			ctx.drawImage(fondoIsla, 100, posIsla);
			for(var i = 0; i<1000; i = i + 112){
				ctx.drawImage(fondoMar, i, posMar);
			}
		}
		</script>
	</head>
	<body onload="inicializar();">
		<canvas id="elcanvas" width="750px" height="380px">
		</canvas>
		<p>
			Assets from <a href="https://ansimuz.itch.io/magic-cliffs-environment">https://ansimuz.itch.io/magic-cliffs-environment</a>
		</p>
		<p>
			Sound from:<br/>
			<a href="https://uaa-software.itch.io/antiflux-ost-soundtrack">https://uaa-software.itch.io/antiflux-ost-soundtrack</a><br/>
			<a href="http://soundbible.com/885-Sea-Waves.html#Sea Waves Sound">http://soundbible.com/885-Sea-Waves.html#Sea Waves Sound</a>
		</p>
	</body>
</html>